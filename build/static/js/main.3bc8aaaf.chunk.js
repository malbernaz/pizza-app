(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),l=n(9),o=n(1),u=n(6),s=n(14),m=n.n(s),p=n(18);function d(e){if(!(arguments.length<=1)&&arguments.length-1)throw new Error("error: graphql`` template literal do not support expressions.");var t=String.raw(e);return{string:t,request:function(){var e=Object(p.a)(m.a.mark(function e(n){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",body:JSON.stringify({query:t,variables:n}),headers:{"content-type":"application/json"}},e.next=3,fetch("https://core-graphql.dev.waldo.photos/pizza",a);case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}var f=Object(a.createContext)({}),b=function(e){var t=e.children,n=Object(a.useState)({}),c=Object(u.a)(n,2),i=c[0],l=c[1];return r.a.createElement(f.Provider,{value:{state:i,setState:l}},t)};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.string,r=e.request,c=Object(a.useContext)(f),i=c.state,u=c.setState,s="".concat(n,":").concat(JSON.stringify(t)),m=i[s]||{loading:!1,loaded:!1};return Object(a.useEffect)(function(){m.loaded||(u(Object(o.a)({},i,Object(l.a)({},s,{loading:!0,loaded:!1}))),r(t).then(function(e){u(Object(o.a)({},i,Object(l.a)({},s,Object(o.a)({},e,{loading:!1,loaded:!0}))))}))},[s]),m}var h=r.a.createContext(),z=function(e){var t=e.children,n=e.initialState,a=e.reducer,c=r.a.useReducer(a,n),i=Object(u.a)(c,2),l=i[0],o=i[1];return r.a.createElement(h.Provider,{value:{state:l,dispatch:o}},t)};function E(e,t){var n=r.a.useContext(h),a=n.state,c=n.dispatch;return Object(o.a)({},e?e(a):a,t?t(c):{})}var v=n(10),j=n(5),y=(n(8),{name:"1ii7m2d",styles:'*,*::before,*::after{box-sizing:border-box;}html,body{padding:0;margin:0;font:16px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";}'}),O=n(2),S="ADD_PIZZA",x="UPDATE_PIZZA",k="REMOVE_PIZZA",P="SET_CURRENT_TOPPING",w=Object(O.a)("button",{target:"e1jqdezv0"})({name:"89wz7f",styles:"appearance:none;font:inherit;"}),N=Object(O.a)("div",{target:"e1jqdezv1"})({name:"1n2mv2k",styles:"display:flex;justify-content:center;align-items:center;"}),q=Object(O.a)(N,{target:"e1jqdezv2"})({name:"cgq59l",styles:"flex-direction:column;"}),C=Object(O.a)(q,{target:"e1jqdezv3"})({name:"1lmzvj5",styles:"min-height:100vh;h1{text-transform:uppercase;}"}),I=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),T=function(e){return{cart:e.cart}},U=function(e){return{removePizza:function(t){e({type:k,pizza:t})}}};function A(){var e=E(T,U),t=e.cart,n=e.removePizza;return r.a.createElement(C,null,r.a.createElement("h1",null,"Cart"),t.length?r.a.createElement(D,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"name"},"name"),r.a.createElement("th",{className:"toppings"},"toppings"),r.a.createElement("th",{className:"price"},"price"),r.a.createElement("th",{className:"remove"},"remove"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{className:"name"},e.name),r.a.createElement("td",{className:"toppings"},e.toppings.join(", ")),r.a.createElement("td",{className:"price"},I.format(e.totalPrice)),r.a.createElement("td",{className:"remove",role:"button",tabIndex:"0",onClick:function(){return n(e)}},"\xd7"))}))):r.a.createElement(Z,null,"no pizzas yet : ("),r.a.createElement(R,null,r.a.createElement("b",null,"Total"),": ",I.format(t.reduce(function(e,t){return e+t.totalPrice},0))),r.a.createElement(_,{to:"choose-size"},"add pizza"))}var D=Object(O.a)("table",{target:"e1nz07030"})({name:"1ckf6tu",styles:"th,td{text-align:left;padding:0.5em 1em;}.price{text-align:right;}td.remove{text-align:center;color:red;cursor:pointer;}"}),Z=Object(O.a)("div",{target:"e1nz07031"})({name:"gyi8z9",styles:"margin:2em 0;font-weight:700;"}),R=Object(O.a)("div",{target:"e1nz07032"})({name:"1tdv2ld",styles:"margin:2em 0;"}),_=Object(O.a)(j.a,{target:"e1nz07033"})({name:"za1t5k",styles:"text-transform:uppercase;color:#000;text-decoration:none;border-radius:2px;padding:0.5em;border:1px solid;"}),J=n(13);function F(){var e=Object(J.a)(["\n  query {\n    pizzaSizes {\n      name\n      maxToppings\n      basePrice\n    }\n  }\n"]);return F=function(){return e},e}var M=d(F()),B=function(e){return{chooseSize:function(t){var n=Math.random().toString(36).substr(2),a=Object(o.a)({},t,{id:n});e({type:P,currentSize:a}),Object(j.c)("/choose-toppings")}}};function $(){var e=E(null,B).chooseSize,t=g(M),n=t.data,c=t.loaded,i=Object(a.useState)({}),l=Object(u.a)(i,2),o=l[0],s=l[1];return r.a.createElement(C,null,r.a.createElement("h1",null,"choose your pizza size!"),c?r.a.createElement(q,{as:"form",onSubmit:function(t){t.preventDefault(),e(o)}},r.a.createElement(N,null,n.pizzaSizes.map(function(e){return r.a.createElement(G,{key:e.name},r.a.createElement("input",{type:"radio",value:e.name,checked:o.name===e.name,onChange:function(){return s(e)}}),r.a.createElement(q,null,r.a.createElement("h2",null,e.name.toUpperCase()),r.a.createElement("div",{className:"price"},I.format(e.basePrice))))})),r.a.createElement(w,{disabled:!o.name},"submit")):"loading sizes...")}var G=Object(O.a)("label",{target:"e17nwtde0"})({name:"5sjpo2",styles:"display:block;position:relative;margin:2em 1em;border:1px solid;padding:0.5em 1em;input{appearance:none;position:absolute;top:0;left:0;width:100%;height:100%;}h2{font-size:1em;}.price{font-size:2em;}"});function H(){var e=Object(J.a)(["\n  query($name: PizzaSizes) {\n    pizza: pizzaSizeByName(name: $name) {\n      toppings {\n        defaultSelected\n        topping {\n          name\n          price\n        }\n      }\n    }\n  }\n"]);return H=function(){return e},e}var V=d(H()),K=function(e){return{currentSize:e.currentSize}},L=function(e){return{addPizza:function(t){e({type:S,pizza:t}),Object(j.c)("/")}}};function Q(){var e=E(K,L),t=e.currentSize,n=e.addPizza,c=g(V,{name:t.name.toUpperCase()}),i=c.data,l=c.loaded,s=Object(a.useState)(W(l?i.pizza.toppings:[])),m=Object(u.a)(s,2),p=m[0],d=m[1],f=p.filter(function(e){return e.checked}).length,b=p.reduce(function(e,t){return e+(t.checked?t.topping.price:0)},0),h=t.basePrice+b,z=t.maxToppings===f;Object(a.useEffect)(function(){l&&d(W(i.pizza.toppings))},[l]);return r.a.createElement(C,null,r.a.createElement("h1",null,"choose your toppings!"),r.a.createElement(X,{as:"form",onSubmit:function(e){e.preventDefault(),n(Object(o.a)({},t,{totalPrice:h,toppings:p.filter(function(e){return e.checked}).map(function(e){return e.topping.name})}))}},l?p.map(function(e){return r.a.createElement(Y,{key:e.topping.name},r.a.createElement("input",{type:"checkbox",checked:e.checked,disabled:!e.checked&&z,onChange:function(){return t=e.topping.name,void d(p.map(function(e){return e.topping.name===t?Object(o.a)({},e,{checked:!e.checked}):e}));var t}}),r.a.createElement("span",{className:"name"},e.topping.name),r.a.createElement("span",{className:"price"},I.format(e.topping.price)))}):"loading toppings...",r.a.createElement(ee,null,r.a.createElement("h2",null,"Sumary:"),r.a.createElement("span",null,r.a.createElement("b",null,"size:")," ",t.name),r.a.createElement("span",{style:{color:z?"red":""}},r.a.createElement("b",null,"toppings limit:")," ",t.maxToppings||"unlimited"),r.a.createElement("span",null,r.a.createElement("b",null,"base price:")," ",I.format(t.basePrice)),r.a.createElement("span",null,r.a.createElement("b",null,"total price:")," ",I.format(h))),r.a.createElement(w,null,"add pizza")))}var W=function(e){return e.map(function(e){return Object(o.a)({checked:e.defaultSelected},e)})},X=Object(O.a)(q,{target:"ethg40i0"})({name:"1jfvg9w",styles:"align-items:flex-start;"}),Y=Object(O.a)("label",{target:"ethg40i1"})({name:"mapbhr",styles:"padding:0.5em 0;border-bottom:1px solid;width:100%;&:last-of-type{border-bottom:none;}input:disabled ~ *{opacity:0.5;}.name{margin-left:0.5em;}.price{margin-left:2em;float:right;}"}),ee=Object(O.a)(q,{target:"ethg40i2"})({name:"dsmurf",styles:"align-items:flex-start;margin-bottom:2em;"}),te=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{styles:y}),r.a.createElement(j.b,null,r.a.createElement(A,{path:"/"}),r.a.createElement($,{path:"/choose-size"}),r.a.createElement(Q,{path:"/choose-toppings"})))},ne=document.querySelector("#mnt");var ae=n(20);var re,ce=function(){var e={cart:[],currentSize:null};return{initialState:e,reducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:return Object(o.a)({},t,{cart:[].concat(Object(ae.a)(t.cart),[n.pizza])});case x:return Object(o.a)({},t,{cart:t.cart.map(function(e){return e.id===n.pizza.id?n.pizza:e})});case k:return Object(o.a)({},t,{cart:t.cart.filter(function(e){return e.id!==n.pizza.id})});case P:return Object(o.a)({},t,{currentSize:n.currentSize});default:return t}}}}();re=ce,i.a.render(r.a.createElement(z,re,r.a.createElement(b,null,r.a.createElement(te,null))),ne)}},[[21,1,2]]]);
//# sourceMappingURL=main.3bc8aaaf.chunk.js.map